!function(e,a,t){"use strict";function i(e){function a(e){if(e.preventDefault(),""===o)return!1;var a=this,t=a.parentNode,i=document.querySelector(".is-playing"),l=t.querySelector("iframe");if(o=a.getAttribute("data-url"),null!==i){var r=document.querySelector(".is-playing .media__iframe");null!==r&&i.removeChild(r),i.className=i.className.replace(/(\S+)playing/,"")}t.className+=" is-playing",null!==l&&t.removeChild(l),m||(m=document.createElement("iframe"),m.className="media__iframe media__element",m.setAttribute("src",o),m.setAttribute("allowfullscreen",!0),c&&m.setAttribute("allow",c)),t.appendChild(m)}function i(e){e.preventDefault();var a=this,t=a.parentNode,i=t.querySelector("iframe.media__element");t.className.match("is-playing")&&(t.className=t.className.replace(/(\S+)playing/,"")),null!==i&&t.removeChild(i)}var l=e,r=l.querySelector("iframe"),n=l.querySelector(".media__icon--play"),d=t.parse(l.getAttribute("data-media"));if(null!==n){var m,c,o=n.getAttribute("data-url");d&&d.allow&&(c=d.allow),null!==r&&null!=r.parentNode&&r.parentNode.removeChild(r),t.on(l,"click",".media__icon--play",a),t.on(l,"click",".media__icon--close",i),l.className+=" media--player--on"}}a.theme.blazyMedia=function(e){var i,l=e.el,r=t.parse(l.getAttribute("data-media"))||{},n=l.querySelector("img"),d=null!==n?n.getAttribute("alt"):"Video preview",m=Math.round(r.height/r.width*100,2),c=l.getAttribute("data-box-url"),o=l.getAttribute("href");return i='<div class="media-wrapper media-wrapper--inline" style="width:'+r.width+'px">',i+='<div class="media media--switch media--player media--ratio media--ratio--fluid" style="padding-bottom: '+m+'%">',i+='<img src="'+c+'" class="media__image media__element" alt="'+a.t(d)+'"/>',i+='<span class="media__icon media__icon--close"></span>',i+='<span class="media__icon media__icon--play" data-url="'+o+'"></span>',i+="</div></div>"},a.behaviors.blazyMedia={attach:function(e){var a=document.querySelectorAll(".media--switch.media--player:not(.media--player--on)");a.length>0&&t.once(t.forEach(a,i))}}}(jQuery,Drupal,dBlazy);
