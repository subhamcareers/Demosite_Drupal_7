!function(o,t){"use strict";"function"==typeof define&&define.amd?define([window.dBlazy],t):"object"==typeof exports?module.exports=t(window.dBlazy):o.Bio=t(window.dBlazy)}(this,function(o){"use strict";function t(o){var t=this;t.options=s.extend({},t.defaults,o||{}),c=!1,u=!1,n(t)}function n(o){var t={rootMargin:o.options.rootMargin,threshold:o.options.threshold};o.elms=(o.options.root||e).querySelectorAll(o.options.selector+":not(."+o.options.successClass+")"),o.count=o.elms.length,o.windowWidth=s.windowWidth(),o.prepare(),o.observer=new IntersectionObserver(o.observing.bind(o),t),u||(o.observe(),u=!0)}var e=document,s=o,i=0,r=0,c=!1,u=!1,d=t.prototype;return d.constructor=t,d.count=0,d.counted=-1,d.erCounted=0,d._er=-1,d._ok=1,d.defaults={root:null,disconnect:!1,error:!1,success:!1,intersecting:!1,observing:!1,useAjax:!1,successClass:"b-loaded",selector:".b-lazy",errorClass:"b-error",bgClass:"b-bg",rootMargin:"0px",threshold:[0]},d.load=function(o){var t=this;t.isValid(o)?t.intersecting(o):s.forEach(o,function(o){t.isValid(o)&&t.intersecting(o)}),c||t.disconnect()},d.isLoaded=function(o){return s.hasClass(o,this.options.successClass)},d.isValid=function(o){return"object"==typeof o&&void 0===o.length&&!this.isLoaded(o)},d.prepare=function(){},d.revalidate=function(o){var t=this;(!0===o||t.count!==t.counted)&&r<t.counted&&(c=!1,t.elms=(t.options.root||e).querySelectorAll(t.options.selector),t.observe(),r++)},d.intersecting=function(o){var t=this;"function"==typeof t.options.intersecting&&t.options.intersecting(o,t.options),s.trigger(o,"bio.intersecting",{options:t.options}),t.lazyLoad(o),t.counted++,c||t.observer.unobserve(o)},d.lazyLoad=function(o){},d.success=function(o,t,n){var e=this;"function"==typeof e.options.success&&e.options.success(o,t,n,e.options),e.erCounted>0&&e.erCounted--},d.error=function(o,t,n){var e=this;"function"==typeof e.options.error&&e.options.error(o,t,n,e.options),e.erCounted++},d.loaded=function(o,t,n){var e=this;o.classList.add(t===e._ok?e.options.successClass:e.options.errorClass),e[t===e._ok?"success":"error"](o,t,n)},d.observe=function(){var o=this;i=o.elms.length,s.forEach(o.elms,function(t){o.isLoaded(t)||o.observer.observe(t)})},d.observing=function(o,t){var n=this;n.entries=o,c||(s.forEach(o,function(o){"function"==typeof n.options.observing&&n.options.observing(o,t,n.options),(o.isIntersecting||o.intersectionRatio>0)&&(n.isLoaded(o.target)||n.intersecting(o.target),i--)}),n.disconnect())},d.disconnect=function(o){var t=this;t.erCounted>0&&!o||((0===i||t.count===t.counted)&&t.options.disconnect||o)&&(t.observer.disconnect(),c=!0)},d.destroy=function(o){var t=this;t.disconnect(o),t.observer=null},d.disconnected=function(){return c},d.reinit=function(){c=!1,u=!1,n(this)},t});
